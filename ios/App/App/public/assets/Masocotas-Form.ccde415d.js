import{W as B,r as u,a as k,o as A,Y as m,Z as C,_ as s,$ as o,aw as M,ac as l,a6 as V,a7 as Q,a8 as N,aY as g,aZ as v,a3 as r,a_ as h,J as Y,a5 as p,aX as P,a2 as D,aa as q,ab as R}from"./index.7607eaa6.js";import{Q as T}from"./QPage.1364d81a.js";import{C as O}from"./ClosePopup.c777a9fb.js";import{g as $,c as L,d as E,b as U,e as G}from"./firebase.06ad51f4.js";import{d as Z,E as z}from"./jspdf.es.min.d27903b2.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.054b8074.js";const W=n=>(q("data-v-21492660"),n=n(),R(),n),X={class:"q-gutter-md"},j={class:"text-h6"},H={class:"text-subtitle1"},K={class:"text-caption"},w={class:"text-caption"},ee={class:"text-caption"},ae={class:"text-caption"},te={class:"text-caption"},oe=W(()=>l("div",{class:"text-h6"},"Confirmar Eliminaci\xF3n",-1)),se=B({__name:"Masocotas-Form",setup(n){const i=u([]),d=u(!1),c=u(null),_=u(""),F=async()=>{try{const a=await $(L(E,"constancia"));i.value=a.docs.map(e=>({id:e.id,...e.data()}))}catch(a){console.error("Error obteniendo documentos: ",a)}},f=a=>Z.formatDate(a,"DD/MM/YYYY"),b=a=>{const e=new z;e.setFontSize(12),e.text("CONSTANCIA DE REGISTRO DE MASCOTAS.",14,10),e.text("Barrio/Comunidad: "+a.barrio,14,20),e.text("Clave Catastral: "+a.catastro,140,20),e.text("Direcci\xF3n: "+a.direccion,14,30),e.text("Fecha: "+f(a.fecha),140,30),e.text("El GADIP MUNICIPIO DE CAYAMBE a trav\xE9s de la Direcci\xF3n de Ambiente damos constancia",14,40),e.text("del registro de mascotas al Sr/Sra. "+a.tutor+" con N\xB0 de c\xE9dula "+a.cedula,14,50),e.text("registrados por "+a.regispor,14,60),e.text("_________________________",14,80),e.text("Firma del propietario",14,85),e.text("_________________________",100,80),e.text("Firma del registrador",100,85),e.save(`constancia-${a.tutor}.pdf`)},I=a=>{c.value=a,d.value=!0},S=async()=>{if(c.value)try{await U(G(E,"constancia",c.value.id)),i.value=i.value.filter(a=>{var e;return a.id!==((e=c.value)==null?void 0:e.id)}),d.value=!1,c.value=null}catch(a){console.error("Error eliminando documento: ",a)}},x=k(()=>_.value?i.value.filter(a=>a.cedula.toLowerCase().includes(_.value.toLowerCase())):i.value);return A(F),(a,e)=>(m(),C(T,{padding:""},{default:s(()=>[o(M,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"Buscar por C\xE9dula",filled:"",clearable:"",onInput:x.value},null,8,["modelValue","onInput"]),l("div",X,[(m(!0),V(N,null,Q(x.value,t=>(m(),C(g,{key:t.id,class:"q-mb-md"},{default:s(()=>[o(v,null,{default:s(()=>[l("div",j,r(t.tutor),1),l("div",H,"C\xE9dula: "+r(t.cedula),1),l("div",K,"Barrio: "+r(t.barrio),1),l("div",w,"Direcci\xF3n: "+r(t.direccion),1),l("div",ee,"Fecha: "+r(f(t.fecha)),1),l("div",ae,"Clave Catastral: "+r(t.catastro),1),l("div",te,"Registrado por: "+r(t.regispor),1)]),_:2},1024),o(h,{align:"right"},{default:s(()=>[o(p,{flat:"",color:"primary",onClick:y=>b(t)},{default:s(()=>[D(" Descargar PDF ")]),_:2},1032,["onClick"]),o(p,{flat:"",color:"negative",onClick:y=>I(t)},{default:s(()=>[D(" Eliminar ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),o(P,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t)},{default:s(()=>[o(g,null,{default:s(()=>[o(v,{class:"row items-center q-pb-none"},{default:s(()=>[oe]),_:1}),o(v,null,{default:s(()=>{var t;return[l("p",null," \xBFEst\xE1s seguro de que deseas eliminar el registro de "+r((t=c.value)==null?void 0:t.tutor)+"? ",1)]}),_:1}),o(h,{align:"right"},{default:s(()=>[Y(o(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[O]]),o(p,{flat:"",label:"Eliminar",color:"negative",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var ue=J(se,[["__scopeId","data-v-21492660"]]);export{ue as default};
