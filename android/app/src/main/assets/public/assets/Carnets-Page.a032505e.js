import{W as I,r as p,a as V,o as F,Y as m,Z as h,_ as l,$ as o,aw as Q,ac as s,a6 as B,a7 as P,a8 as q,aY as C,aZ as f,a3 as r,a_ as g,J as R,a5 as _,aX as Y,a2 as D,aa as z,ab as A}from"./index.7607eaa6.js";import{Q as M}from"./QPage.1364d81a.js";import{C as T}from"./ClosePopup.c777a9fb.js";import{g as $,c as L,d as b,b as O,e as U}from"./firebase.06ad51f4.js";import{d as Z,E as G}from"./jspdf.es.min.d27903b2.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.054b8074.js";const E=d=>(z("data-v-22f44a02"),d=d(),A(),d),W={class:"q-gutter-md"},X=E(()=>s("div",{class:"text-h6"},"Datos Mascota",-1)),j={class:"text-caption"},H={class:"text-caption"},K={class:"text-caption"},ee={class:"text-caption"},ae={class:"text-caption"},te={class:"text-caption"},oe=E(()=>s("div",{class:"text-h6"},"Confirmar Eliminaci\xF3n",-1)),le=I({__name:"Carnets-Page",setup(d){const i=p([]),c=p(!1),n=p(null),u=p(""),N=async()=>{try{const e=await $(L(b,"mascotas"));i.value=e.docs.map(a=>({id:a.id,...a.data()}))}catch(e){console.error("Error obteniendo documentos: ",e)}},v=e=>Z.formatDate(e,"DD/MM/YYYY"),S=e=>{const a=new G;a.setFontSize(12),a.text("CONSTANCIA DE REGISTRO DE MASCOTAS.",14,10),a.text("Nombre: "+e.nombre,14,20),a.text("Especie: "+e.especie,14,30),a.text("Fecha de Nacimiento: "+v(e.fechaNacimiento),14,40),a.text("Raza: "+e.raza,14,50),a.text("Sexo: "+e.sexo,14,60),a.text("Edad: "+e.edad,14,70),a.save(`constancia-${e.nombre}.pdf`)},w=e=>{n.value=e,c.value=!0},y=async()=>{if(n.value)try{await O(U(b,"mascotas",n.value.id)),i.value=i.value.filter(e=>{var a;return e.id!==((a=n.value)==null?void 0:a.id)}),c.value=!1,n.value=null}catch(e){console.error("Error eliminando documento: ",e)}},x=V(()=>u.value?i.value.filter(e=>e.nombre.toLowerCase().includes(u.value.toLowerCase())):i.value);return F(N),(e,a)=>(m(),h(M,null,{default:l(()=>[o(Q,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),placeholder:"Buscar por Nombre",filled:"",clearable:"",onInput:x.value},null,8,["modelValue","onInput"]),s("div",W,[(m(!0),B(q,null,P(x.value,t=>(m(),h(C,{key:t.id,class:"q-mb-md q-card--bordered"},{default:l(()=>[o(f,null,{default:l(()=>[X,s("div",j,"Nombre: "+r(t.nombre),1),s("div",H,"Especie: "+r(t.especie),1),s("div",K,"Fecha de Nacimiento: "+r(v(t.fechaNacimiento)),1),s("div",ee,"Raza: "+r(t.raza),1),s("div",ae,"Sexo: "+r(t.sexo),1),s("div",te,"Edad: "+r(t.edad),1)]),_:2},1024),o(g,{align:"right"},{default:l(()=>[o(_,{flat:"",color:"primary",onClick:k=>S(t)},{default:l(()=>[D(" Descargar PDF ")]),_:2},1032,["onClick"]),o(_,{flat:"",color:"negative",onClick:k=>w(t)},{default:l(()=>[D(" Eliminar ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),o(Y,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t)},{default:l(()=>[o(C,null,{default:l(()=>[o(f,{class:"row items-center q-pb-none"},{default:l(()=>[oe]),_:1}),o(f,null,{default:l(()=>{var t;return[s("p",null," \xBFEst\xE1s seguro de que deseas eliminar el registro de "+r((t=n.value)==null?void 0:t.nombre)+"? ",1)]}),_:1}),o(g,{align:"right"},{default:l(()=>[R(o(_,{flat:"",label:"Cancelar",color:"primary"},null,512),[[T]]),o(_,{flat:"",label:"Eliminar",color:"negative",onClick:y})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var pe=J(le,[["__scopeId","data-v-22f44a02"]]);export{pe as default};
